<%- include('../../partials/siteHeader', {pageTitle: "Products Page"}) %>
    <h1 class="text-center my-4">Products Page</h1>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-end mb-3">
                <a href="/products/createForm" class="btn btn-success">Create New Product</a>
            </div>
            <div class="col-md-12">
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Product ID</th>
                            <th>Product Name</th>
                            <th>Supplier ID</th>
                            <th>Category ID</th>
                            <th>Quantity Per Unit</th>
                            <th>Unit Price</th>
                            <th>Units In Stock</th>
                            <th>Units On Order</th>
                            <th>Reorder Level</th>
                            <th>Discontinued</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(product => { %>
                        <tr>
                            <td><%= product.ProductID %></td>
                            <td><%= product.ProductName %></td>
                            <td><%= product.SupplierID %></td>
                            <td><%= product.CategoryID %></td>
                            <td><%= product.QuantityPerUnit %></td>
                            <td><%= product.UnitPrice %></td>
                            <td><%= product.UnitsInStock %></td>
                            <td><%= product.UnitsOnOrder %></td>
                            <td><%= product.ReorderLevel %></td>
                            <td><%= product.Discontinued ? 'Yes' : 'No' %></td>
                            <td>
                                <a href="/products/updateForm/<%= product.ProductID %>" class="btn btn-primary btn-sm">Edit</a>
                                <form action="/products/destroy/<%= product.ProductID %>?_method=DELETE" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                </form>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
<script>
    function confirmDelete(event) {
        if (!confirm('Are you sure you want to delete this product?')) {
            event.preventDefault();
        }
    }
    document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', confirmDelete);
    });
</script>
<%- include('../../partials/siteFooter') %>