<%- include('../../partials/siteHeader', {pageTitle: "Products", user: user}) %>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Products Management</h2>
        <a href="/products/createForm" class="btn btn-primary">+ Add New Product</a>
    </div>
    
    <% if (typeof products !== 'undefined' && products.length > 0) { %>
        <div class="product-grid">
            <% products.forEach((product) => { %>
                <div class="product-card">
                    <% if (product.photo && product.photo !== '') { %>
                        <img src="/img/uploads/<%= product.photo %>" alt="<%= product.productName %>" class="product-image">
                    <% } else { %>
                        <div class="product-image" style="background: #f7fafc; display: flex; align-items: center; justify-content: center; color: #a0aec0;">
                            <span>No Image</span>
                        </div>
                    <% } %>
                    
                    <div class="product-content">
                        <h3 class="product-name"><%= product.productName %></h3>
                        <% if (product.category && product.category.categoryName) { %>
                            <div class="product-category"><%= product.category.categoryName %></div>
                        <% } %>
                        <% if (product.price) { %>
                            <div class="product-price">$<%= product.price %></div>
                        <% } %>
                        
                        <div class="product-actions">
                            <a href="/products/show/<%= product.id %>" class="btn btn-secondary">View</a>
                            <a href="/products/updateForm/<%= product.id %>" class="btn btn-primary">Edit</a>
                            <button onclick="deleteProduct('<%= product.id %>')" class="btn btn-danger">Delete</button>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    <% } else { %>
        <div class="empty-state">
            <div class="empty-state-icon">ðŸ“¦</div>
            <h3 class="empty-state-title">No Products Found</h3>
            <p class="empty-state-description">Get started by adding your first product to the catalog.</p>
            <a href="/products/createForm" class="btn btn-primary">Add Your First Product</a>
        </div>
    <% } %>
</div>

<script>
    function deleteProduct(productId) {
        if (confirm("Are you sure you want to delete this product? This action cannot be undone.")) {
            window.location.href = "/products/destroy/" + productId;
        }
    }
</script>

<%- include('../../partials/siteFooter') %>